{%- assign secSt = section.settings -%}

<section section-name="accordion" class="{% render 'section-interva-set' , secSt:secSt %}" >
    <div class="page-width px-4 mx-auto">
      <ul class="accordion w-full">

      {%- for block in section.blocks -%}
      {% assign blkSt = block.settings %}
      {% assign forFirsrt = forloop.first %}
          <li>
            <div tag-name='accordion-header' class="flex flex-row border-solid border-0 border-b border-black-700 cursor-pointer justify-between items-center">
                <p class="md:text-2xl text-xl font-semibold md:my-6 my-2">{{blkSt.title}}</p>
                <div tag-name='accordion-arrow' class="overflow-hidden md:w-8 md:h-8 h-6 w-6">
                  <svg t="1685002036388" class="block md:w-8 md:h-8 h-6 w-6" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1832" width="32" height="32"><path d="M512 34.133333C247.808 34.133333 34.133333 247.808 34.133333 512s213.674667 477.866667 477.866667 477.866667 477.866667-213.674667 477.866667-477.866667S776.192 34.133333 512 34.133333z m220.501333 500.394667h-197.973333V778.24c-25.258667 0-45.738667-20.48-45.738667-45.738667v-197.973333H245.76c0-25.258667 20.48-45.738667 45.738667-45.738667h197.973333V245.76c25.258667 0 45.738667 20.48 45.738667 45.738667v197.973333H778.24c0 24.576-20.48 45.056-45.738667 45.056z" fill="#dbdbdb" p-id="1833" data-spm-anchor-id="a313x.7781069.0.i10" class="selected"></path></svg>
                  <svg t="1685002046935" class="{%- unless forFirsrt -%}hidden{% endunless %} block md:w-8 md:h-8 h-6 w-6 md:-translate-y-8 -translate-y-6 transition-all" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2096" width="32" height="32"><path d="M512 34.133333C247.808 34.133333 34.133333 247.808 34.133333 512s213.674667 477.866667 477.866667 477.866667 477.866667-213.674667 477.866667-477.866667S776.192 34.133333 512 34.133333z m266.24 456.021334c0 24.576-19.797333 44.373333-44.373333 44.373333H245.76v-1.365333c0-24.576 19.797333-44.373333 44.373333-44.373334H778.24v1.365334z" fill="#2c2c2c" p-id="2097"></path></svg>
                </div>
            </div>


            <div tag-name='accordion-content' class="{%- unless forFirsrt -%}hidden{% endunless %} md:text-lg text-base md:mt-8 mt-6">
            {%- case block.type -%}
              {%- when "objList" -%}
                  <div class="flex flex-wrap">
                  {% assign objArr = blkSt.content | split: '<br>'  %}
                    {% for obj in objArr %}
                      {% assign title = obj | split: ':' | first  %}
                      {% assign content = obj | split: ':' | last  %}
                      {% if blkSt.slide_w == "25%" %} {% assign wClass = "md:w-1/4 w-1/2" %} {% else %} {% assign wClass = "w-full" %} {% endif %}
                      <div class="{{ wClass }} md:mb-8 mb-6 ">
                        <p class="m-0 font-semibold">{{title}}</p>
                        <p class="m-0">{{content}}</p>
                      </div>
                    {% endfor %}
                  </div>

              {%- when "image" -%}
                  <div>
                    {{ blkSt.url_pc | image_url: width:1300 | image_tag: width:nil, class:"w-full md:block hidden", loading: 'lazy'}}
                    {{ blkSt.url_mb | image_url: width:765 | image_tag: width:nil, class:"w-full md:hidden block", loading: 'lazy'}}
                  </div>

              {%- when "imageGrid" -%}
              {% assign divClass1 = "flex flex-wrap font-semibold" %}
              {% assign divClass2 = "xl:w-1/6 lg:w-1/4 md:w-1/3 w-1/2" %}
              {% assign divClass3 = "mx-4 rounded overflow-hidden shadow pb-4" %}
              {% assign pClass = "text-base h-14 flex items-center leading-tight p-2 mb-2" %}
                  {%- if product.metafields.custom[blkSt.metafield1] != blank -%}
                  <div class="{{ divClass1 }}">
                    <div class="{{ divClass2 }} text-lg">{{blkSt.text1}}</div>
                    {% for image in product.metafields.custom.test.value %}
                      <div class="{{ divClass2 }}">
                        <div class="{{ divClass3 }}">
                          <p class="{{ pClass }}"> {{image.alt}}</p>
                          {{ image | image_url: width:500 | image_tag: width:nil, class:"w-full block max-h-36", loading: 'lazy'}}
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                  {%- endif -%}
                  {%- if product.metafields.custom[blkSt.metafield2] != blank -%}
                  <div class="{{ divClass1 }}">
                    <div class="{{ divClass2 }} text-lg">{{blkSt.text2}}</div>
                    {% for image in product.metafields.custom.test.value %}
                      <div class="{{ divClass2 }}">
                        <div class="{{ divClass3 }}">
                          <p class="{{ pClass }}"> {{image.alt}}</p>
                          {{ image | image_url: width:500 | image_tag: width:nil, class:"w-full block max-h-36", loading: 'lazy'}}
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                  {%- endif -%}
                  {%- if product.metafields.custom[blkSt.metafield3] != blank -%}
                  <div class="{{ divClass1 }}">
                    <div class="{{ divClass2 }} text-lg">{{blkSt.text4}}</div>
                    {% for image in product.metafields.custom.test.value %}
                      <div class="{{ divClass2 }}">
                        <div class="{{ divClass3 }}">
                          <p class="{{ pClass }}"> {{image.alt}}</p>
                          {{ image | image_url: width:500 | image_tag: width:nil, class:"mx-auto block max-h-36", loading: 'lazy'}}
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                  {%- endif -%}


            {%- endcase -%}
            </div>


          </li>

      {%- endfor -%} 




      </ul>
    </div>
</section> 


{% schema %}
  {
    "name": "Accordion v2",
    "tag": "section",
    "settings": [
      {
        "type": "header",
        "content": "Section interval set"
      },
      {
        "type": "select",
        "id": "top_padding",
        "label": "top interval",
        "default": "large",
        "options": [
          {
            "value": "large",
            "label": "Large"
          },
          {
            "value": "default",
            "label": "Default"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "none",
            "label": "None"
          }
        ]
      },
      {
        "type": "select",
        "id": "bottom_padding",
        "label": "bottom interval",
        "default": "default",
        "options": [
          {
            "value": "large",
            "label": "Large"
          },
          {
            "value": "default",
            "label": "Default"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "none",
            "label": "None"
          }
        ]
      }
    ],
    "blocks":[
      {
        "name": "Specification list",
        "type": "objList",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Drop down header",
            "default":"Electronics"
          },
          {
            "type": "select",
            "id": "slide_w",
            "label": "Slide width",
            "default": "25%",
            "options": [
              {
                "value": "25%",
                "label": "25%"
              },
              {
                "value": "full",
                "label": "100%"
              }
            ]
          },
          {
            "type": "textarea",
            "id": "content",
            "label":"Content",
            "info":"格式是固定的:[标题:内容<br>标题2:内容2<br>标题3:内容3]",
            "default":"Title:content<br>Title2:content2<br>Title3:content3"
          }
        ]
      },
      {
        "name": "Pure image",
        "type": "image",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Drop down header",
            "default":"Electronics"
          },
          {
            "type": "image_picker",
            "id": "url_pc",
            "label":"Image on pc"
          },
          {
            "type": "image_picker",
            "id": "url_mb",
            "label":"Image on mobile"
          }
        ]
      },
      {
        "name": "Image grid",
        "type": "imageGrid",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Drop down header",
            "default":"Electronics"
          },
          {
            "type": "header",
            "content": "============"
          },
          {
            "type": "text",
            "id": "text1",
            "label":"List-1 title"
          },
          {
            "type": "text",
            "id": "metafield1",
            "label":"List-1 Metafield handle"
          },
          {
            "type": "text",
            "id": "text2",
            "label":"List-2 title"
          },
          {
            "type": "text",
            "id": "metafield2",
            "label":"List-2 Metafield handle"
          },
          {
            "type": "text",
            "id": "text3",
            "label":"List-3 title"
          },
          {
            "type": "text",
            "id": "metafield3",
            "label":"List-3 Metafield handle"
          }
        ]
      }
    ],
    "presets": [
        {
          "name": "Accordion v2",
          "category": "Heybike v2"
        }
      ]
  }
{% endschema %} 